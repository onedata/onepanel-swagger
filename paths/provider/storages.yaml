get:
  operationId: get_storages
  summary: Get storages
  description: |
    Returns the list of provider storage resources and their details.

    ***Example cURL requests***

    **Get provider storage ids**
    ```bash
    curl -H "X-Auth-Token: $TOKEN" -X GET \
    https://$HOST/api/v3/onepanel/provider/storages

    {
      "ids": [
        "18a42a43b1b2d92455ffa09e9a15df7fch4f82",
        "0a26877440f6ce457106c6958dfe7ecbch0ac6",
        "b3d7d10504393556d9b1631a74c34520ch8359"
      ]
    }
    ```
  x-onedata-gri:
    type: onp_storage
    aspect: list
  tags:
    - Storages
  produces:
    - application/json
  responses:
    '200':
      description: The provider storage resources Ids.
      schema:
        $ref: '#/definitions/ProviderStorages'
    '401':
      description: Unauthorized request.
    '403':
      description: Forbidden request.
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/Error'
    '503':
      description: Services needed to fulfill this request are not running.
  x-code-samples:
    - lang: Shell
      source: onepanel-rest-cli -u onepanel:$PASSPHRASE getStorages --host https://$HOST:9443


post:
  operationId: add_storage
  summary: Add storage
  description: |
    Adds additional storage resources to the provider.

    ***Example cURL requests***

    **Add storage**
    ```bash
    curl -H "X-Auth-Token: $TOKEN" -X POST \
    -H "Content-type: application/json" \
    -d '{"s3_Storage": {"type": "s3", "hostname": "iam.example.com", "bucketName": "bucket1.iam.example.com", "skipStorageDetection": true}}' \
    https://$HOST/api/v3/onepanel/provider/storages
    ```
  x-onedata-gri:
    type: onp_storage
    aspect: instances
  tags:
    - Storages
  consumes:
    - application/json
  responses:
    '204':
      description: >
        The storage resources have been successfully added to the provider deployment.
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '401':
      description: Unauthorized request.
    '403':
      description: Forbidden request.
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/Error'
    '503':
      description: Services needed to fulfill this request are not running.
  parameters:
    - name: storageCreateRequest
      in: body
      description: >
        The configuration details of storage resources to be added to
        the provider deployment. Must be an object with unique names for
        the storages as keys and their corresponding configuration (objects)
        as values - see the request body example.
      schema:
        $ref: '#/definitions/StorageCreateRequest'
      required: true
  x-code-samples:
    - lang: Shell
      source: cat storages.json | onepanel-rest-cli -u onepanel:$PASSPHRASE addStorage --host https://$HOST:9443
